---
title: XG Firewallの通知設定を行う
tags:
  - XG Firewall
categories:
  - Security
date: 2020-04-03 22:24:39
---
<p class="onepoint">この記事で実現すること</p>
XG Firewallで重要なエラーが発生した場合、VPNの接続通知、バージョンアップの通知をメールで受けとれます。

<!-- more -->
## Gmailからメールを通知する設定を行う

XG Firewallのセットアップ時に通知用のメールアドレスを設定しても、メール通知がされません。プロバイダをはじめどこのサービスでも、SPAM対策がなされており、簡単にメールを送信する事は出来なくなっています。これは、{% label primary@Outbound Port 25 Blocking %}と呼ばれています。この回避策として、Googleアカウントを使う事で、メール通知が可能となります。

1. Googleアカウントをお持ちでない方はアカウントを作成し、あらかじめ2段階認証の設定を行ってください。次に[Googleアカウントのページ](https://myaccount.google.com/?tab=kk)に行き、左ペインの{% label primary@セキュリティ %}をクリックしてください。
2. アプリパスワードをクリックします。

{% asset_img googleacount.png alt %}

3. Googleアカウントのパスワードで認証します
4. {% label primary@アプリ パスワードを生成するアプリとデバイスを選択してください。 %}という説明があるので、そこでXG用のパスワードと分かるように以下を入力してください
5. アプリを選択　→　メールを選択します
6. デバイスを選択　→　その他（名前を選択）を選択します

{% asset_img googleacount1.png alt %}

7. 名前をXG Firewallのものと分かるように入力します
8. 生成ボタンをクリックします
9. 生成されたアプリパスワードが表示されます
10. パスワードを控えておきます
11. 完了ボタンをクリックし、Googleでの設定を終了します

{% asset_img googleacount2.png alt %}

続いて、XG側の設定となります。左ペインの{% label primary@管理 %}から、{% label primary@通知の設定 %}をクリックします。以下の通り、{% label primary@外部メールサーバー %}を選択し、先ほどのGmailアカウントに関する情報を入力していきます。

{% asset_img googleacount3.png alt %}

| 説明                             | 内容                                   |
| -------------------------------- | -------------------------------------- |
| メールサーバーアドレス           | smtp.gmail.com                         |
| ポート                           | 587                                    |
| ユーザ名                         | your_account@gmail.com                 |
| パスワード                       | Googleで取得した16桁のアプリパスワード |
| 接続のセキュリティ               | STARTTLS                               |
| 送信元メールアドレス             | your_account@gmail.com                 |
| メールアドレスに通知を送信       | 通知を受け取りたいメールアドレス       |
| 管理インターフェースのIPアドレス | WANのIPアドレスを選択                  |

最後に適用をクリックします。その後通知ボタンをクリックしテスト通知で正しく受信できる事を確認してください。それなりに重要度が高いものを対象とし、スマホで通知を受けると良いでしょう。

## メール通知するイベントを選択する

XGの左ペインから{% label primary@システムサービス %}→{% label primary@通知リスト %}と進みます。以下の通り、イベント毎に通知が設定可能となっているので、{% label primary@メール通知 %}のトグルスイッチをオンにして、好みの通知について選択してください。

{% asset_img notify.png alt %}

リスク観点で考えると、以下の内容をオンにしておくのがお勧めです。

- ユーザーのサインイン失敗
- 新しいファームウェアの通知
- システム関連（起動、CPU高、シグネチャ更新失敗）
- VPNの接続
- IPSの攻撃検知（サーバー公開している場合）
