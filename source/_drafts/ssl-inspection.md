---
title: XG Firewall v18のSSLインスペクションを設定する
tags:
  - XG Firewall
categories:
  - Software
---

{% note primary no-icon %}

## Traffic to Wanルールの作成

{% endnote %}

　XGがv18から若干設定というか考え方が難しくなるのはこの部分です。上記までの基本ルールとは別に、SSLを解読して検査する設定を行う事になります。今日でもSSLという呼び方は定着していますが、TLS（Transport Layer Security）とも呼ばれます。XGの最も素晴らしい機能の1つがSSLを解読する安全装置です。この安全装置の事を、「IPS」（Intrusion Prevension System）と呼びます。そして、その解読方法として「SSLインスペクション」という方式が採用されています。
　このSSLインスペクションについては、解りやすい文献がありますので紹介します。セキュリティベンダーの（株）ラック社から提供されているドキュメントです。

>出典：株式会社ラック[【「常時SSL化」時代に向けたセキュリティ対策指南書】](https://www.lac.co.jp/library/pdf/ssl_guidebook.pdf)

　私のいつものお約束で恐縮ですが、文章の冒頭に記載されている自己責任についての確認をお願いします。特にP13に記載されているSSLインペクションゾーンの仕事をしてくれるのがXGの役割です。

{% note primary no-icon %}

## Traffic to Wanルールの作成

{% endnote %}

　さて、これまでインターネットへのOutboundルールを作成してきました。その時のルールでは、「復号化したHTTPSをスキャン」という内容も含まれていました。ですが、このHTTPSのスキャンを行うにはクライアントとインターネット上のサーバの間にXGが介入し、暗号化された通信を解読する事になります。

 左ペインのルールとポリシーからSSL/TLSインスペクションルールをクリックします。

{% asset_img notls.png alt %}

1. 画面右側の追加ボタンをクリックします
2. ルール名を入力します。ここでは「CA_Client」とします
3. 処理は「複合化」を選択します
4. 複合化のプロファイルは「Maximum compatibility」を選択します（※ここでは複合化しませんが）
5. 送信元の送信ゾーンは、LANとVPNを選択します
6. 宛先とサービスの宛先ゾーンは、WANを選択します
7. 最後に保存ボタンをクリックします

　上記の設定でHTTPSの複合化は行われなくなりました。ここまでの操作で一旦はひと段落です。クライアントからブラウジングしてみて、通常のネット閲覧に問題が無い事を確認してください。
